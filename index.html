<!DOCTYPE html> 
<html>
<head>
    <script>
        //created a new XMLHttpRequest Object
    var xhr = new XMLHttpRequest();
    // On Changing the request State
    xhr.onreadystatechange = function()
    {
        if(this.readyState==4 && this.status==200) //if state is=4(response received) and status=200 (no errors)
        {
            var fetched = JSON.parse(xhr.responseText); // parse json file to object
            document.getElementById("Soil_value").innerHTML="<p>"+fetched.feeds[0].field1+" %";

            document.getElementById("temperature_value").innerHTML="<p>"+fetched.feeds[0].field2+"C";
            
            document.getElementById("humidity_value").innerHTML="<p>"+fetched.feeds[0].field3+" %";
            
            document.getElementById("Heat_value").innerHTML="<p>"+fetched.feeds[0].field4+" F";
            
        }
    }

    /***** Fetch Request to thingspeak****/
        xhr.open("GET","https://api.thingspeak.com/channels/1257458/feeds.json?api_key=8XB1NQXWH8ND45KT&results=2", true);
            
    /***** Sending of Fetch Request to thingspeak*****/
    xhr.send();
</script>
    <meta name="viewport" content="width=device-width, intial-scale=1.0">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <title> Weather Monitor v1.0</title>
</head>
<div>
<div id="topbar">
<h1 id="header1">Weather Monitor v1.0</h1>
</div>

<!-- Temperature Container -->
<div class="holder">
<div class="container" id="temperature_container" onclick="window.open('Temperature_Details.html', '_self');">
        <i class="fa fa-thermometer-quarter icon"></i>
    <p class="container_headers" style="text-align:center; font-weight: bold">Temperature</p>
    <hr/>
    <div id="temperature_value">
        <img src="images/loading.gif" height="30%" width="30%" alt="Loading Temperature"> </div>
    </div>
</div>

<div class="container" id="Soil_container" onclick="window.open('soil_moisture.html', '_self');">
        <i class="fa fa-wind icon"></i>
    <p class="container_headers" style="text-align:center; font-weight: bold">Soil Moisture</p> 
    <hr/>
    <div id="Soil_value">
        <img src="images/loading.gif" height="30%" width="30%" alt="Loading Soil Moisture"> </div>
    </div>
</div>
<br>

<!-- Humidity Container -->
<div class="container" id="humidity_container" onclick="window.open('Humidity_Details.html', '_self');">
        <i class="fa fa-tint icon"></i>
    <p class="container_headers" style="text-align:center; font-weight: bold">Humidity</p> 
    <hr/>
    <div id="humidity_value">
        <img src="images/loading.gif" height="30%" width="30%" alt="Loading Humidity"> </div>
    </div>
</div>
<div class="container" id="pressure_container" onclick="window.open('heat_index.html', '_self');">
    <img src="https://visualpharm.com/assets/922/Atmospheric%20Pressure-595b40b65ba036ed117d17b2.svg" height="42px" width="42px"> 
    <p class="container_headers" style="text-align:center; font-weight: bold">Heat Index</p> 
    <hr/>
    <div id="Heat_value">
        <img src="images/loading.gif" height="30%" width="30%" alt="Loading Heat Index">
    </div>
</div>
</div>
</body>
</html>